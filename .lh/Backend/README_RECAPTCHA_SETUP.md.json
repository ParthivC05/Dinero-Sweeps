{
    "sourceFile": "Backend/README_RECAPTCHA_SETUP.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752639426510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752639426510,
            "name": "Commit-0",
            "content": "# Backend Setup Guide - reCAPTCHA & CORS\r\n\r\n## reCAPTCHA Setup\r\n\r\n### 1. Get reCAPTCHA Keys\r\n1. Go to [Google reCAPTCHA Admin Console](https://www.google.com/recaptcha/admin)\r\n2. Create a new site or use existing one\r\n3. Choose reCAPTCHA v2 \"I'm not a robot\" Checkbox\r\n4. Add your domains:\r\n   - `localhost` (for development)\r\n   - `127.0.0.1` (for development)\r\n   - `dinero-sweeps.vercel.app` (for production)\r\n5. Copy both the **Site Key** and **Secret Key**\r\n\r\n### 2. Environment Variables\r\nAdd to your `.env` file:\r\n```env\r\n# reCAPTCHA Configuration\r\nRECAPTCHA_SECRET_KEY=your_recaptcha_secret_key_here\r\n```\r\n\r\n### 3. Frontend Environment Variables\r\nIn your frontend `.env` file:\r\n```env\r\nVITE_RECAPTCHA_SITE_KEY=your_recaptcha_site_key_here\r\nVITE_API_BASE_URL=http://localhost:4000\r\n```\r\n\r\n## CORS Configuration\r\n\r\n### Current Setup\r\nThe backend is configured to allow requests from:\r\n- All origins specified in `ALLOWED_ORIGIN` environment variable\r\n- Common development origins:\r\n  - `http://localhost:3000`\r\n  - `http://localhost:5173`\r\n  - `http://127.0.0.1:3000`\r\n  - `http://127.0.0.1:5173`\r\n  - `https://dinero-sweeps.vercel.app`\r\n\r\n### Environment Variables for CORS\r\nAdd to your `.env` file:\r\n```env\r\nALLOWED_ORIGIN=http://localhost:3000,http://localhost:5173,https://dinero-sweeps.vercel.app\r\n```\r\n\r\n## Installation & Dependencies\r\n\r\n### Install node-fetch (if not already installed)\r\n```bash\r\nnpm install node-fetch\r\n```\r\n\r\n### Required Environment Variables\r\nMake sure these are set in your `.env` file:\r\n```env\r\n# Database\r\nDB_SYNC=false\r\nDB_PORT=5432\r\nDB_WRITE_HOST=localhost\r\nDB_READ_HOST=localhost\r\nDB_USER=your_db_user\r\nDB_PASSWORD=your_db_password\r\nDB_NAME=your_db_name\r\n\r\n# App\r\nNODE_ENV=development\r\nPORT=4000\r\nUSER_BACKEND_URL=http://localhost:4000\r\nUSER_FRONTEND_URL=http://localhost:3000\r\nALLOWED_ORIGIN=http://localhost:3000,http://localhost:5173,https://dinero-sweeps.vercel.app\r\n\r\n# JWT\r\nJWT_LOGIN_SECRET=your_jwt_secret\r\nJWT_LOGIN_TOKEN_EXPIRY=2h\r\n\r\n# reCAPTCHA\r\nRECAPTCHA_SECRET_KEY=your_recaptcha_secret_key_here\r\n```\r\n\r\n## Testing the Setup\r\n\r\n### 1. Test reCAPTCHA Verification\r\n```bash\r\ncurl -X POST http://localhost:4000/user/login \\\r\n  -H \"Content-Type: application/json\" \\\r\n  -d '{\r\n    \"username\": \"testuser\",\r\n    \"password\": \"TestPass123\",\r\n    \"captchaToken\": \"test_token\"\r\n  }'\r\n```\r\n\r\n### 2. Test CORS\r\nFrom your frontend, the login request should now work without CORS errors.\r\n\r\n## Troubleshooting\r\n\r\n### CORS Issues\r\n1. Check that your frontend URL is in the `ALLOWED_ORIGIN` list\r\n2. Ensure the backend is running on the correct port\r\n3. Check browser console for specific CORS error messages\r\n\r\n### reCAPTCHA Issues\r\n1. Verify the secret key is correct in your `.env` file\r\n2. Check that the site key is correct in your frontend `.env` file\r\n3. Ensure both keys are from the same reCAPTCHA site\r\n4. Check backend logs for reCAPTCHA verification errors\r\n\r\n### Network Issues\r\n1. Ensure the backend is running and accessible\r\n2. Check that the `VITE_API_BASE_URL` points to the correct backend URL\r\n3. Verify firewall settings if testing from different machines\r\n\r\n## Security Notes\r\n\r\n1. **Never expose the reCAPTCHA secret key** in frontend code\r\n2. **Always verify reCAPTCHA tokens** on the backend before processing login\r\n3. **Use HTTPS in production** for secure communication\r\n4. **Regularly rotate JWT secrets** and reCAPTCHA keys\r\n5. **Monitor failed login attempts** and implement rate limiting if needed "
        }
    ]
}