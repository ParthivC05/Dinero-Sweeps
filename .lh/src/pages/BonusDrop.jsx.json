{
    "sourceFile": "src/pages/BonusDrop.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1753270437615,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1753270437615,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\nimport bonusDrop from \"../assets/bonus-drop.gif\";\r\n\r\nconst BonusDrop = () => {\r\n  const [code, setCode] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [bonus, setBonus] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const isValidCode = /^[a-zA-Z0-9]{10}$/.test(code);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    setError(\"\");\r\n    setBonus(null);\r\n    const token = localStorage.getItem('authToken');\r\n    try {\r\n      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/bonus/redeem`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ code })\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setMessage(data.message || 'Bonus successfully applied!');\r\n        setBonus({ type: data.rewardType, amount: data.rewardAmount });\r\n        setCode(\"\");\r\n      } else {\r\n        setError(data.error || 'Invalid or expired code.');\r\n        setCode(\"\");\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to redeem code.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center w-full min-h-[300px]\">\r\n      <img\r\n        src={bonusDrop}\r\n        alt=\"Bonus Drop Leprechaun\"\r\n        className=\"w-64 mx-auto mb-4\"\r\n        style={{ maxWidth: '260px' }}\r\n      />\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"bg-[#232323] rounded-2xl shadow-lg px-8 py-6 w-full max-w-xl flex flex-col items-center\"\r\n      >\r\n        <label htmlFor=\"bonus-code\" className=\"text-white text-lg font-semibold mb-2 w-full text-left\">\r\n          Code\r\n        </label>\r\n        <input\r\n          id=\"bonus-code\"\r\n          type=\"text\"\r\n          value={code}\r\n          onChange={e => setCode(e.target.value)}\r\n          className=\"w-full bg-gray-700 text-white rounded-md px-4 py-3 mb-6 focus:outline-none focus:ring-2 focus:ring-yellow-400 text-lg font-mono\"\r\n          placeholder=\"Enter bonus code here\"\r\n          maxLength={10}\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-gradient-to-b from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white font-bold py-2 px-10 rounded-full text-lg shadow-md transition-colors\"\r\n          disabled={!isValidCode || loading}\r\n        >\r\n          {loading ? 'Processing...' : 'Submit'}\r\n        </button>\r\n        {message && <div className=\"mt-4 text-green-400 font-semibold text-center\">{message} {bonus && (<span>You received {bonus.amount} {bonus.type}</span>)}</div>}\r\n        {error && <div className=\"mt-4 text-red-400 font-semibold text-center\">{error}</div>}\r\n        <div className=\"mt-4 text-gray-400 text-sm text-center\">\r\n          Find bonus codes on our <a href=\"https://twitter.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 underline\">Twitter</a> and <a href=\"https://t.me/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 underline\">Telegram</a>!\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BonusDrop; "
        }
    ]
}