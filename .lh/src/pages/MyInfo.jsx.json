{
    "sourceFile": "src/pages/MyInfo.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1753250884391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753261119876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,52 +1,11 @@\n-import React, { useState } from \"react\";\r\n+import React from \"react\";\r\n import Avatar from \"react-avatar\";\r\n-import { FaTimes, FaEdit, FaSave } from \"react-icons/fa\";\r\n+import { FaTimes } from \"react-icons/fa\";\r\n import { useNavigate } from \"react-router-dom\";\r\n \r\n const MyInfo = ({ user }) => {\r\n   const navigate = useNavigate();\r\n-  const [editMode, setEditMode] = useState(false);\r\n-  const [form, setForm] = useState({\r\n-    firstName: user.firstName || '',\r\n-    lastName: user.lastName || '',\r\n-    email: user.email || ''\r\n-  });\r\n-  const [message, setMessage] = useState(\"\");\r\n-  const [loading, setLoading] = useState(false);\r\n-\r\n-  const handleChange = (e) => {\r\n-    setForm({ ...form, [e.target.name]: e.target.value });\r\n-  };\r\n-\r\n-  const handleSave = async (e) => {\r\n-    e.preventDefault();\r\n-    setLoading(true);\r\n-    setMessage(\"\");\r\n-    const token = localStorage.getItem('authToken');\r\n-    try {\r\n-      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/users/me`, {\r\n-        method: 'PUT',\r\n-        headers: {\r\n-          'Content-Type': 'application/json',\r\n-          Authorization: `Bearer ${token}`\r\n-        },\r\n-        body: JSON.stringify(form)\r\n-      });\r\n-      const data = await response.json();\r\n-      if (response.ok) {\r\n-        setMessage('Profile updated successfully!');\r\n-        setEditMode(false);\r\n-        // Optionally update local user state here\r\n-      } else {\r\n-        setMessage(data.error || 'Failed to update profile.');\r\n-      }\r\n-    } catch (err) {\r\n-      setMessage('Failed to update profile.');\r\n-    }\r\n-    setLoading(false);\r\n-  };\r\n-\r\n   return (\r\n     <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n       {/* Blurred and darkened backdrop */}\r\n       <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"></div>\r\n@@ -60,67 +19,24 @@\n         </button>\r\n         <div className=\"flex items-center gap-6 mb-6\">\r\n           <div className=\"relative\">\r\n             <div className=\"rounded-full border-4 border-yellow-400\" style={{ width: 80, height: 80, overflow: 'hidden' }}>\r\n+              console.log(object)\r\n               <Avatar\r\n                 src={user.avatar}\r\n-                name={form.firstName + ' ' + form.lastName}\r\n+                name={user.firstName + ' ' + user.lastName}\r\n                 size=\"80\"\r\n                 round={true}\r\n               />\r\n             </div>\r\n           </div>\r\n           <div className=\"flex-1\">\r\n-            <div className=\"text-2xl font-bold text-white\">{form.firstName} {form.lastName}</div>\r\n+            <div className=\"text-2xl font-bold text-white\">{user.firstName} {user.lastName}</div>\r\n             <div className=\"text-lg text-gray-300\">ID: {user._id || user.id}</div>\r\n             <div className=\"text-sm text-white mt-2\">Referred friend: 0</div>\r\n             <div className=\"text-green-400 font-bold\">SC 0 Earned</div>\r\n           </div>\r\n         </div>\r\n-        <form onSubmit={handleSave} className=\"grid grid-cols-2 gap-4 mt-4\">\r\n-          <div className=\"col-span-2 flex justify-end mb-2\">\r\n-            {!editMode ? (\r\n-              <button type=\"button\" className=\"flex items-center gap-2 text-yellow-400 hover:text-yellow-500 font-semibold\" onClick={() => setEditMode(true)}>\r\n-                <FaEdit /> Edit\r\n-              </button>\r\n-            ) : (\r\n-              <button type=\"submit\" className=\"flex items-center gap-2 text-green-400 hover:text-green-500 font-semibold\" disabled={loading}>\r\n-                <FaSave /> {loading ? 'Saving...' : 'Save'}\r\n-              </button>\r\n-            )}\r\n-          </div>\r\n-          <div>\r\n-            <label className=\"block font-semibold text-white mb-1\">First Name</label>\r\n-            <input\r\n-              className=\"input-field w-full bg-gray-900 text-white\"\r\n-              name=\"firstName\"\r\n-              value={form.firstName}\r\n-              onChange={handleChange}\r\n-              readOnly={!editMode}\r\n-            />\r\n-          </div>\r\n-          <div>\r\n-            <label className=\"block font-semibold text-white mb-1\">Last Name</label>\r\n-            <input\r\n-              className=\"input-field w-full bg-gray-900 text-white\"\r\n-              name=\"lastName\"\r\n-              value={form.lastName}\r\n-              onChange={handleChange}\r\n-              readOnly={!editMode}\r\n-            />\r\n-          </div>\r\n-          <div className=\"col-span-2\">\r\n-            <label className=\"block font-semibold text-white mb-1\">Email</label>\r\n-            <input\r\n-              className=\"input-field w-full bg-gray-900 text-white\"\r\n-              name=\"email\"\r\n-              value={form.email}\r\n-              onChange={handleChange}\r\n-              readOnly={!editMode}\r\n-            />\r\n-          </div>\r\n-          {message && <div className=\"col-span-2 text-center text-yellow-400 font-semibold mt-2\">{message}</div>}\r\n-        </form>\r\n         <div className=\"grid grid-cols-4 gap-4 mt-4\">\r\n           <div className=\"rounded-xl border-2 border-yellow-400 p-4 text-center\">\r\n             <div className=\"text-3xl font-bold text-white\">{user.stats?.losses || 0}</div>\r\n             <div className=\"text-lg text-white mt-2\">Losses</div>\r\n"
                },
                {
                    "date": 1753261126420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         </button>\r\n         <div className=\"flex items-center gap-6 mb-6\">\r\n           <div className=\"relative\">\r\n             <div className=\"rounded-full border-4 border-yellow-400\" style={{ width: 80, height: 80, overflow: 'hidden' }}>\r\n-              console.log(object)\r\n+              {console.log(user)}\r\n               <Avatar\r\n                 src={user.avatar}\r\n                 name={user.firstName + ' ' + user.lastName}\r\n                 size=\"80\"\r\n"
                },
                {
                    "date": 1753268890193,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,12 @@\n import { useNavigate } from \"react-router-dom\";\r\n \r\n const MyInfo = ({ user }) => {\r\n   const navigate = useNavigate();\r\n+  // Compute the full avatar URL if present\r\n+  const avatarUrl = user.avatar\r\n+    ? `${import.meta.env.VITE_API_BASE_URL.replace('/api/v1', '')}/${user.avatar.replace(/^\\/+/, '')}`\r\n+    : undefined;\r\n   return (\r\n     <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n       {/* Blurred and darkened backdrop */}\r\n       <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"></div>\r\n@@ -19,11 +23,10 @@\n         </button>\r\n         <div className=\"flex items-center gap-6 mb-6\">\r\n           <div className=\"relative\">\r\n             <div className=\"rounded-full border-4 border-yellow-400\" style={{ width: 80, height: 80, overflow: 'hidden' }}>\r\n-              {console.log(user)}\r\n               <Avatar\r\n-                src={user.avatar}\r\n+                src={avatarUrl}\r\n                 name={user.firstName + ' ' + user.lastName}\r\n                 size=\"80\"\r\n                 round={true}\r\n               />\r\n"
                },
                {
                    "date": 1753269021531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,12 +4,8 @@\n import { useNavigate } from \"react-router-dom\";\r\n \r\n const MyInfo = ({ user }) => {\r\n   const navigate = useNavigate();\r\n-  // Compute the full avatar URL if present\r\n-  const avatarUrl = user.avatar\r\n-    ? `${import.meta.env.VITE_API_BASE_URL.replace('/api/v1', '')}/${user.avatar.replace(/^\\/+/, '')}`\r\n-    : undefined;\r\n   return (\r\n     <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n       {/* Blurred and darkened backdrop */}\r\n       <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"></div>\r\n@@ -23,10 +19,11 @@\n         </button>\r\n         <div className=\"flex items-center gap-6 mb-6\">\r\n           <div className=\"relative\">\r\n             <div className=\"rounded-full border-4 border-yellow-400\" style={{ width: 80, height: 80, overflow: 'hidden' }}>\r\n+              {console.log(user)}\r\n               <Avatar\r\n-                src={avatarUrl}\r\n+                src={user.avatar}\r\n                 name={user.firstName + ' ' + user.lastName}\r\n                 size=\"80\"\r\n                 round={true}\r\n               />\r\n"
                },
                {
                    "date": 1753269132918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,11 @@\n import { useNavigate } from \"react-router-dom\";\r\n \r\n const MyInfo = ({ user }) => {\r\n   const navigate = useNavigate();\r\n+  const avatarUrl = user.avatar\r\n+    ? `${import.meta.env.VITE_API_BASE_URL.replace('/api/v1', '')}/${user.avatar.replace(/\\\\\\\\/g, '/').replace(/\\\\/g, '/')}`\r\n+    : undefined;\r\n   return (\r\n     <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n       {/* Blurred and darkened backdrop */}\r\n       <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"></div>\r\n@@ -21,9 +24,9 @@\n           <div className=\"relative\">\r\n             <div className=\"rounded-full border-4 border-yellow-400\" style={{ width: 80, height: 80, overflow: 'hidden' }}>\r\n               {console.log(user)}\r\n               <Avatar\r\n-                src={user.avatar}\r\n+                src={avatarUrl}\r\n                 name={user.firstName + ' ' + user.lastName}\r\n                 size=\"80\"\r\n                 round={true}\r\n               />\r\n"
                },
                {
                    "date": 1753269847426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,8 +28,9 @@\n                 src={avatarUrl}\r\n                 name={user.firstName + ' ' + user.lastName}\r\n                 size=\"80\"\r\n                 round={true}\r\n+                crossOrigin=\"anonymous\"\r\n               />\r\n             </div>\r\n           </div>\r\n           <div className=\"flex-1\">\r\n"
                },
                {
                    "date": 1753273848328,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,11 +9,9 @@\n     ? `${import.meta.env.VITE_API_BASE_URL.replace('/api/v1', '')}/${user.avatar.replace(/\\\\\\\\/g, '/').replace(/\\\\/g, '/')}`\r\n     : undefined;\r\n   return (\r\n     <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n-      {/* Blurred and darkened backdrop */}\r\n       <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"></div>\r\n-      {/* Modal/Card */}\r\n       <div className=\"relative w-full max-w-2xl bg-gradient-to-br from-[#0a2a3a] to-[#0d1e2b] rounded-2xl p-6 shadow-xl z-10\">\r\n         <button\r\n           className=\"absolute top-4 right-4 text-2xl text-red-400 hover:text-red-600\"\r\n           onClick={() => navigate(\"/\")}\r\n"
                }
            ],
            "date": 1753250884390,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\nimport Avatar from \"react-avatar\";\r\nimport { FaTimes, FaEdit, FaSave } from \"react-icons/fa\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst MyInfo = ({ user }) => {\r\n  const navigate = useNavigate();\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [form, setForm] = useState({\r\n    firstName: user.firstName || '',\r\n    lastName: user.lastName || '',\r\n    email: user.email || ''\r\n  });\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSave = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    const token = localStorage.getItem('authToken');\r\n    try {\r\n      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/users/me`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(form)\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setMessage('Profile updated successfully!');\r\n        setEditMode(false);\r\n        // Optionally update local user state here\r\n      } else {\r\n        setMessage(data.error || 'Failed to update profile.');\r\n      }\r\n    } catch (err) {\r\n      setMessage('Failed to update profile.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Blurred and darkened backdrop */}\r\n      <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"></div>\r\n      {/* Modal/Card */}\r\n      <div className=\"relative w-full max-w-2xl bg-gradient-to-br from-[#0a2a3a] to-[#0d1e2b] rounded-2xl p-6 shadow-xl z-10\">\r\n        <button\r\n          className=\"absolute top-4 right-4 text-2xl text-red-400 hover:text-red-600\"\r\n          onClick={() => navigate(\"/\")}\r\n        >\r\n          <FaTimes />\r\n        </button>\r\n        <div className=\"flex items-center gap-6 mb-6\">\r\n          <div className=\"relative\">\r\n            <div className=\"rounded-full border-4 border-yellow-400\" style={{ width: 80, height: 80, overflow: 'hidden' }}>\r\n              <Avatar\r\n                src={user.avatar}\r\n                name={form.firstName + ' ' + form.lastName}\r\n                size=\"80\"\r\n                round={true}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <div className=\"text-2xl font-bold text-white\">{form.firstName} {form.lastName}</div>\r\n            <div className=\"text-lg text-gray-300\">ID: {user._id || user.id}</div>\r\n            <div className=\"text-sm text-white mt-2\">Referred friend: 0</div>\r\n            <div className=\"text-green-400 font-bold\">SC 0 Earned</div>\r\n          </div>\r\n        </div>\r\n        <form onSubmit={handleSave} className=\"grid grid-cols-2 gap-4 mt-4\">\r\n          <div className=\"col-span-2 flex justify-end mb-2\">\r\n            {!editMode ? (\r\n              <button type=\"button\" className=\"flex items-center gap-2 text-yellow-400 hover:text-yellow-500 font-semibold\" onClick={() => setEditMode(true)}>\r\n                <FaEdit /> Edit\r\n              </button>\r\n            ) : (\r\n              <button type=\"submit\" className=\"flex items-center gap-2 text-green-400 hover:text-green-500 font-semibold\" disabled={loading}>\r\n                <FaSave /> {loading ? 'Saving...' : 'Save'}\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div>\r\n            <label className=\"block font-semibold text-white mb-1\">First Name</label>\r\n            <input\r\n              className=\"input-field w-full bg-gray-900 text-white\"\r\n              name=\"firstName\"\r\n              value={form.firstName}\r\n              onChange={handleChange}\r\n              readOnly={!editMode}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block font-semibold text-white mb-1\">Last Name</label>\r\n            <input\r\n              className=\"input-field w-full bg-gray-900 text-white\"\r\n              name=\"lastName\"\r\n              value={form.lastName}\r\n              onChange={handleChange}\r\n              readOnly={!editMode}\r\n            />\r\n          </div>\r\n          <div className=\"col-span-2\">\r\n            <label className=\"block font-semibold text-white mb-1\">Email</label>\r\n            <input\r\n              className=\"input-field w-full bg-gray-900 text-white\"\r\n              name=\"email\"\r\n              value={form.email}\r\n              onChange={handleChange}\r\n              readOnly={!editMode}\r\n            />\r\n          </div>\r\n          {message && <div className=\"col-span-2 text-center text-yellow-400 font-semibold mt-2\">{message}</div>}\r\n        </form>\r\n        <div className=\"grid grid-cols-4 gap-4 mt-4\">\r\n          <div className=\"rounded-xl border-2 border-yellow-400 p-4 text-center\">\r\n            <div className=\"text-3xl font-bold text-white\">{user.stats?.losses || 0}</div>\r\n            <div className=\"text-lg text-white mt-2\">Losses</div>\r\n          </div>\r\n          <div className=\"rounded-xl border-2 border-yellow-400 p-4 text-center\">\r\n            <div className=\"text-3xl font-bold text-white\">{user.stats?.wins || 0}</div>\r\n            <div className=\"text-lg text-white mt-2\">Wins</div>\r\n          </div>\r\n          <div className=\"rounded-xl border-2 border-yellow-400 p-4 text-center\">\r\n            <div className=\"text-3xl font-bold text-white\">{user.stats?.totalBets || 0}</div>\r\n            <div className=\"text-lg text-white mt-2\">Bet</div>\r\n          </div>\r\n          <div className=\"rounded-xl border-2 border-yellow-400 p-4 text-center\">\r\n            <div className=\"text-3xl font-bold text-white\">$20K</div>\r\n            <div className=\"text-lg text-white mt-2\">Wagered</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyInfo; "
        }
    ]
}