{
    "sourceFile": "src/pages/Password.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1753250828409,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753255598667,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n     }\r\n     setLoading(true);\r\n     const token = localStorage.getItem('authToken');\r\n     try {\r\n-      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/users/me/password`, {\r\n+      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/users/me/change-password`, {\r\n         method: 'POST',\r\n         headers: {\r\n           'Content-Type': 'application/json',\r\n           Authorization: `Bearer ${token}`\r\n"
                },
                {
                    "date": 1753255644196,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n     setLoading(true);\r\n     const token = localStorage.getItem('authToken');\r\n     try {\r\n       const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/users/me/change-password`, {\r\n-        method: 'POST',\r\n+        method: 'PATCH',\r\n         headers: {\r\n           'Content-Type': 'application/json',\r\n           Authorization: `Bearer ${token}`\r\n         },\r\n"
                }
            ],
            "date": 1753250828409,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\n\r\nconst Password = () => {\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setMessage(\"\");\r\n    if (!oldPassword || !newPassword || !confirmPassword) {\r\n      setMessage(\"All fields are required.\");\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      setMessage(\"New passwords do not match.\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    const token = localStorage.getItem('authToken');\r\n    try {\r\n      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/users/me/password`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ oldPassword, newPassword })\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setMessage('Password updated successfully!');\r\n        setOldPassword(\"\");\r\n        setNewPassword(\"\");\r\n        setConfirmPassword(\"\");\r\n      } else {\r\n        setMessage(data.error || 'Failed to update password.');\r\n      }\r\n    } catch (err) {\r\n      setMessage('Failed to update password.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center w-full min-h-screen bg-transparent pt-8 pb-16\">\r\n      <div className=\"w-full max-w-2xl bg-[#232224] rounded-2xl shadow-lg p-8\">\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block font-semibold text-white mb-1\">Current Password <span className=\"text-red-400\">*</span></label>\r\n            <input className=\"input-field w-full bg-gray-900 text-white\" type=\"password\" value={oldPassword} onChange={e => setOldPassword(e.target.value)} />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block font-semibold text-white mb-1\">New Password <span className=\"text-red-400\">*</span></label>\r\n            <input className=\"input-field w-full bg-gray-900 text-white\" type=\"password\" value={newPassword} onChange={e => setNewPassword(e.target.value)} />\r\n          </div>\r\n          <div className=\"mb-8\">\r\n            <label className=\"block font-semibold text-white mb-1\">Confirm Password <span className=\"text-red-400\">*</span></label>\r\n            <input className=\"input-field w-full bg-gray-900 text-white\" type=\"password\" value={confirmPassword} onChange={e => setConfirmPassword(e.target.value)} />\r\n          </div>\r\n          <button type=\"submit\" className=\"bg-gradient-to-r from-orange-400 to-red-600 px-8 py-2 rounded-full text-white font-bold shadow-lg\" disabled={loading}>{loading ? 'Updating...' : 'Submit'}</button>\r\n          {message && <div className=\"mt-4 text-center text-yellow-400 font-semibold\">{message}</div>}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Password; "
        }
    ]
}